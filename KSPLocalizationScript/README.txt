# KSP Localization Tool

This tool scans `.cs` and `.cfg` files in a Kerbal Space Program mod to automatically extract localizable strings, replace them with localization keys, and generate localization files in KSP's expected format.

---

## 🚀 Features

* Parses `.cs` and `.cfg` files for UI and descriptive strings
* Replaces hardcoded text with `Localizer.Format("#key")` or `#key`
* Detects and handles duplicate key collisions
* Skips all types of comments (`//`, `///`, `/* ... */`)
* Outputs:

  * `Localization/en-us.cfg` (for KSP localization)
  * `Localization/en-us.csv` (for translators)

---

## 🧾 Usage

### 🔧 Command-Line Arguments

| Argument                    | Description                                                                   |
| --------------------------- | ----------------------------------------------------------------------------- |
| `--csdir=<path>`            | Directory containing `.cs` source files (default: current directory)          |
| `--cfgdir=<path>`           | Directory containing `.cfg` config files (default: current directory)         |
| `--out=<path>`              | Output path for the `en-us.cfg` localization file                             |
| `--prefix=<prefix>`         | Prefix for localization keys (e.g., `MyMod_` or `autoLOC_`)                   |
| `--writeSeparateFiles=true` | Write modified files to `.loc.cs`/`.loc.cfg` instead of overwriting originals |

---

## 📁 Output Files

### `en-us.cfg`

KSP-style localization file:

```cfg
Localization
{
    en-us
    {
        #MyMod_Engine_Offline = Engine Offline
        #MyMod_Description = Powers your rocket
    }
}
```

### `en-us.csv`

Translation reference table:

```csv
Key,OriginalText
"#MyMod_Engine_Offline","Engine Offline"
"#MyMod_Description","Powers your rocket"
```

---

## 🛡 Safety

* Backups (`.bak`) are created for all modified files unless `--writeSeparateFiles=true` is used.
* Output directories are created automatically if missing.

---

## 🧠 Notes

* Keys are generated by cleaning non-alphanumeric characters and collapsing multiple underscores
* All keys are prefixed with `#` automatically if not supplied

---

## 📞 Example

```bash
dotnet run --project KSPLocalizationTool \
  --csdir="Source" \
  --cfgdir="Parts" \
  --out="Localization/en-us.cfg" \
  --prefix="autoLOC_" \
  --writeSeparateFiles=true
```

---

For questions or feature requests, open an issue or contact the maintainer.
